<div fxLayout="row" fxLayoutAlign="center center">
    <div *ngIf="user; else noUser">
        <mat-card style="max-width: 400px;">
            <mat-card-header>
                <div mat-card-avatar>
                    <img [src]="user.photoURL" class="card-header-image" alt="User Photo">
                </div>
                <mat-card-title>{{user.displayName}}</mat-card-title>
                <mat-card-subtitle>{{user.email}}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <form [formGroup]="userForm" (ngSubmit)="save()" class="edit-form">
    
                    <mat-form-field>
                        <mat-label for="name">Display Name</mat-label>
                        <input matInput id="name" name="name" type="text" formControlName="displayName">
                        <mat-error *ngIf="userForm.get('displayName').invalid">{{getNameError()}}</mat-error>
                    </mat-form-field>
    
                    <mat-form-field>
                        <mat-label for="age">Age</mat-label>
                        <input matInput id="age" name="age" type="text" formControlName="age">
                    </mat-form-field>
    
                    <mat-form-field>
                        <mat-label for="photo">Photo</mat-label>
                        <input matInput id="photo" name="photo" type="text" formControlName="photoURL">
                    </mat-form-field>
    
                    <mat-form-field>
                        <mat-label>Summary</mat-label>
                        <textarea matInput formControlName="summary"></textarea>
                    </mat-form-field>
                </form>

                <button (click)="showPass = !showPass" class="link">Change Password</button>
                <div *ngIf="showPass" class="raisedbox">
                    <app-user-update-pass></app-user-update-pass>
                </div>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button [routerLink]="['/user/profile']">Back</button>
                <button mat-button color="primary" (click)="save()">Save</button>
            </mat-card-actions>
        </mat-card>
    </div>
    <ng-template #noUser>
        <mat-card>
            <mat-card-header>
                <mat-card-title>Loading User Info</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-spinner style="margin:0 auto;"></mat-spinner> 
            </mat-card-content>
        </mat-card>
    </ng-template>
</div>
